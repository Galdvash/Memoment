{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{UserContext}from\"../../hooks/UserHooks/userContextApp\";import useGetAllUsers from\"../../hooks/UserHooks/useGetAllUsers\";import Loading from\"../Loading/Loading\";import axios from\"axios\";import styles from\"./SandBox.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SandBox(){const{userInformation}=useContext(UserContext);const token=localStorage.getItem(\"token\");const allUsers=useGetAllUsers(token);// קריאה ל-hook שיביא את כל המשתמשים\nconst[users,setUsers]=useState([]);const[showConfirmation,setShowConfirmation]=useState(false);const[userIdToDelete,setUserIdToDelete]=useState(null);useEffect(()=>{setUsers(allUsers);},[allUsers]);// פונקציה למחיקת משתמש\nconst handleDeleteUser=async userId=>{try{await axios.delete(\"http://localhost:5000/api/users/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(token)}});setUsers(users.filter(user=>user._id!==userId));}catch(error){console.error(\"Error deleting user:\",error);}setShowConfirmation(false);setUserIdToDelete(null);};const confirmDeleteUser=userId=>{setShowConfirmation(true);setUserIdToDelete(userId);};const cancelDelete=()=>{setShowConfirmation(false);setUserIdToDelete(null);};if(users.length===0){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsx(\"div\",{className:\"sandBoxContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tableContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Users:\"}),userInformation&&userInformation.role===\"admin\"&&/*#__PURE__*/ // הצגת המידע רק לאדמין\n_jsx(\"div\",{className:styles.tableWrapper,children:/*#__PURE__*/_jsxs(\"table\",{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:styles.button,onClick:()=>confirmDeleteUser(user._id),children:\"Delete\"})})]},user._id))})]})})]}),showConfirmation&&/*#__PURE__*/_jsx(\"div\",{className:styles.confirmation,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.confirmationBox,children:[/*#__PURE__*/_jsx(\"p\",{className:styles.pBox,children:\"Are you sure you want to delete this user?\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.buttonBox,onClick:()=>handleDeleteUser(userIdToDelete),children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.buttonBox,onClick:cancelDelete,children:\"No\"})]})})]})});}export default SandBox;","map":{"version":3,"names":["React","useContext","useEffect","useState","UserContext","useGetAllUsers","Loading","axios","styles","jsx","_jsx","jsxs","_jsxs","SandBox","userInformation","token","localStorage","getItem","allUsers","users","setUsers","showConfirmation","setShowConfirmation","userIdToDelete","setUserIdToDelete","handleDeleteUser","userId","delete","concat","headers","Authorization","filter","user","_id","error","console","confirmDeleteUser","cancelDelete","length","className","children","container","tableContainer","role","tableWrapper","table","map","name","email","button","onClick","confirmation","confirmationBox","pBox","buttonBox"],"sources":["C:/Users/galdv/Desktop/MeMoment/Memoment/FrontEnd/src/component/SandBox/SandBox.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { UserContext } from \"../../hooks/UserHooks/userContextApp\";\r\nimport useGetAllUsers from \"../../hooks/UserHooks/useGetAllUsers\";\r\nimport Loading from \"../Loading/Loading\";\r\nimport axios from \"axios\";\r\nimport styles from \"./SandBox.module.css\";\r\n\r\nfunction SandBox() {\r\n  const { userInformation } = useContext(UserContext);\r\n  const token = localStorage.getItem(\"token\");\r\n  const allUsers = useGetAllUsers(token); // קריאה ל-hook שיביא את כל המשתמשים\r\n  const [users, setUsers] = useState([]);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n  const [userIdToDelete, setUserIdToDelete] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setUsers(allUsers);\r\n  }, [allUsers]);\r\n\r\n  // פונקציה למחיקת משתמש\r\n  const handleDeleteUser = async (userId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/users/${userId}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setUsers(users.filter((user) => user._id !== userId));\r\n    } catch (error) {\r\n      console.error(\"Error deleting user:\", error);\r\n    }\r\n    setShowConfirmation(false);\r\n    setUserIdToDelete(null);\r\n  };\r\n\r\n  const confirmDeleteUser = (userId) => {\r\n    setShowConfirmation(true);\r\n    setUserIdToDelete(userId);\r\n  };\r\n\r\n  const cancelDelete = () => {\r\n    setShowConfirmation(false);\r\n    setUserIdToDelete(null);\r\n  };\r\n\r\n  if (users.length === 0) {\r\n    return <Loading />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"sandBoxContainer\">\r\n      <div className={styles.container}>\r\n        <div className={styles.tableContainer}>\r\n          <h2>All Users:</h2>\r\n          {userInformation &&\r\n            userInformation.role === \"admin\" && ( // הצגת המידע רק לאדמין\r\n              <div className={styles.tableWrapper}>\r\n                <table className={styles.table}>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Email</th>\r\n                      <th>Role</th>\r\n                      <th>Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {users.map((user) => (\r\n                      <tr key={user._id}>\r\n                        <td>{user.name}</td>\r\n                        <td>{user.email}</td>\r\n                        <td>{user.role}</td>\r\n                        <td>\r\n                          <button\r\n                            className={styles.button}\r\n                            onClick={() => confirmDeleteUser(user._id)}\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n        </div>\r\n        {showConfirmation && (\r\n          <div className={styles.confirmation}>\r\n            <div className={styles.confirmationBox}>\r\n              <p className={styles.pBox}>\r\n                Are you sure you want to delete this user?\r\n              </p>\r\n              <button\r\n                className={styles.buttonBox}\r\n                onClick={() => handleDeleteUser(userIdToDelete)}\r\n              >\r\n                Yes\r\n              </button>\r\n              <button className={styles.buttonBox} onClick={cancelDelete}>\r\n                No\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SandBox;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}