{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import FavoriteBorderIcon from\"@mui/icons-material/FavoriteBorder\";import FavoriteIcon from\"@mui/icons-material/Favorite\";import axios from\"axios\";import styleFindTheOne from\"./FoundTheOne.module.css\";import Loading from\"../Loading/Loading\";import useGetUser from\"../../hooks/UserHooks/useGetUser\";import\"./FindTheOne.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FindTheOne=_ref=>{let{searchQuery}=_ref;const[cards,setCards]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const{userInformation}=useGetUser();useEffect(()=>{const fetchLikedCards=async()=>{setLoading(true);setError(null);if(userInformation){try{const response=await axios.get('https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards');const savedLikedCardIds=JSON.parse(localStorage.getItem(\"likedCards-\".concat(userInformation._id)))||[];const likedCards=response.data.filter(card=>card.likes.includes(userInformation._id));const cardsWithLikes=response.data.map(card=>({...card,liked:savedLikedCardIds.includes(card._id)||likedCards.some(likedCard=>likedCard._id===card._id)}));setCards(cardsWithLikes);}catch(error){console.error(error);setError(\"Error fetching cards. Please try again later.\");}}setLoading(false);};fetchLikedCards();},[userInformation]);const handleLike=async cardId=>{const token=localStorage.getItem(\"token\");try{const url=\"https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards/\".concat(cardId);const config={method:'patch',maxBodyLength:Infinity,url,headers:{'x-auth-token':token}};await axios(config);const updatedCards=cards.map(c=>c._id===cardId?{...c,liked:!c.liked}:c);setCards(updatedCards);const newLikedCardIds=updatedCards.filter(c=>c.liked).map(c=>c._id);localStorage.setItem(\"likedCards-\".concat(userInformation._id),JSON.stringify(newLikedCardIds));}catch(error){console.error(error);setError(\"Error updating like status. Please try again later.\");}};if(loading){return/*#__PURE__*/_jsx(Loading,{});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}if(!cards||cards.length===0){return/*#__PURE__*/_jsx(\"div\",{children:\"No cards found\"});}const filteredCards=cards.filter(card=>card.title.toLowerCase().includes(searchQuery.toLowerCase()));return/*#__PURE__*/_jsx(\"div\",{className:\"bodyFindTheOne\",children:/*#__PURE__*/_jsx(\"div\",{className:styleFindTheOne.container_cards,children:/*#__PURE__*/_jsxs(\"div\",{className:styleFindTheOne.frontCard,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Cards\"}),/*#__PURE__*/_jsx(\"ul\",{className:styleFindTheOne.listOfCards,children:filteredCards.map(card=>/*#__PURE__*/_jsxs(\"li\",{className:styleFindTheOne.item,children:[/*#__PURE__*/_jsx(\"img\",{className:styleFindTheOne.imgCards,src:card.image.url,alt:card.image.alt}),/*#__PURE__*/_jsx(\"h2\",{className:styleFindTheOne.title,children:card.title}),/*#__PURE__*/_jsx(\"p\",{className:styleFindTheOne.cardSubtitle,children:card.subtitle}),/*#__PURE__*/_jsx(\"p\",{className:styleFindTheOne.cardDescription,children:card.description}),/*#__PURE__*/_jsx(\"p\",{className:styleFindTheOne.countryName,children:card.address.country}),/*#__PURE__*/_jsxs(\"p\",{className:styleFindTheOne.countryName,children:[\"Phone: \",card.phone]}),/*#__PURE__*/_jsx(\"div\",{className:styleFindTheOne.heartIcon,onClick:()=>handleLike(card._id),children:card.liked?/*#__PURE__*/_jsx(FavoriteIcon,{style:{color:\"red\"}}):/*#__PURE__*/_jsx(FavoriteBorderIcon,{})})]},card._id))})]})})});};export default FindTheOne;","map":{"version":3,"names":["React","useEffect","useState","FavoriteBorderIcon","FavoriteIcon","axios","styleFindTheOne","Loading","useGetUser","jsx","_jsx","jsxs","_jsxs","FindTheOne","_ref","searchQuery","cards","setCards","loading","setLoading","error","setError","userInformation","fetchLikedCards","response","get","savedLikedCardIds","JSON","parse","localStorage","getItem","concat","_id","likedCards","data","filter","card","likes","includes","cardsWithLikes","map","liked","some","likedCard","console","handleLike","cardId","token","url","config","method","maxBodyLength","Infinity","headers","updatedCards","c","newLikedCardIds","setItem","stringify","children","length","filteredCards","title","toLowerCase","className","container_cards","frontCard","listOfCards","item","imgCards","src","image","alt","cardSubtitle","subtitle","cardDescription","description","countryName","address","country","phone","heartIcon","onClick","style","color"],"sources":["C:/Users/galdv/Desktop/MeMoment/Memoment/FrontEnd/src/component/FindTheOne/FindTheOne.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\r\nimport FavoriteIcon from \"@mui/icons-material/Favorite\";\r\nimport axios from \"axios\";\r\nimport styleFindTheOne from \"./FoundTheOne.module.css\";\r\nimport Loading from \"../Loading/Loading\"; \r\nimport useGetUser from \"../../hooks/UserHooks/useGetUser\";\r\nimport \"./FindTheOne.css\"\r\n\r\nconst FindTheOne = ({ searchQuery }) => {\r\n  const [cards, setCards] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const { userInformation } = useGetUser();\r\n\r\n  useEffect(() => {\r\n    const fetchLikedCards = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      if (userInformation) {\r\n        try {\r\n          const response = await axios.get('https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards');\r\n          const savedLikedCardIds = JSON.parse(localStorage.getItem(`likedCards-${userInformation._id}`)) || [];\r\n          const likedCards = response.data.filter(card => card.likes.includes(userInformation._id));\r\n          const cardsWithLikes = response.data.map(card => ({\r\n            ...card,\r\n            liked: savedLikedCardIds.includes(card._id) || likedCards.some(likedCard => likedCard._id === card._id)\r\n          }));\r\n          setCards(cardsWithLikes);\r\n        } catch (error) {\r\n          console.error(error);\r\n          setError(\"Error fetching cards. Please try again later.\");\r\n        }\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchLikedCards();\r\n  }, [userInformation]);\r\n\r\n  const handleLike = async (cardId) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    try {\r\n      const url = `https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards/${cardId}`;\r\n      const config = {\r\n        method: 'patch',\r\n        maxBodyLength: Infinity,\r\n        url,\r\n        headers: {\r\n          'x-auth-token': token\r\n        },\r\n      };\r\n      await axios(config);\r\n\r\n      const updatedCards = cards.map(c =>\r\n        c._id === cardId ? { ...c, liked: !c.liked } : c\r\n      );\r\n      setCards(updatedCards);\r\n\r\n      const newLikedCardIds = updatedCards.filter(c => c.liked).map(c => c._id);\r\n      localStorage.setItem(`likedCards-${userInformation._id}`, JSON.stringify(newLikedCardIds));\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(\"Error updating like status. Please try again later.\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <Loading />; \r\n  }\r\n\r\n  if (error) {\r\n    return <div>Error: {error}</div>; \r\n  }\r\n\r\n  if (!cards || cards.length === 0) {\r\n    return <div>No cards found</div>; \r\n  }\r\n\r\n  const filteredCards = cards.filter(card => \r\n    card.title.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"bodyFindTheOne\">\r\n      <div className={styleFindTheOne.container_cards}>\r\n        <div className={styleFindTheOne.frontCard}>\r\n          <h1>Cards</h1>\r\n          <ul className={styleFindTheOne.listOfCards}>\r\n            {filteredCards.map((card) => (\r\n              <li className={styleFindTheOne.item} key={card._id}>\r\n                <img\r\n                  className={styleFindTheOne.imgCards}\r\n                  src={card.image.url}\r\n                  alt={card.image.alt}\r\n                />\r\n                <h2 className={styleFindTheOne.title}>{card.title}</h2>\r\n                <p className={styleFindTheOne.cardSubtitle}>{card.subtitle}</p>\r\n                <p className={styleFindTheOne.cardDescription}>{card.description}</p>\r\n                <p className={styleFindTheOne.countryName}>{card.address.country}</p>\r\n                <p className={styleFindTheOne.countryName}>Phone: {card.phone}</p>\r\n                <div className={styleFindTheOne.heartIcon} onClick={() => handleLike(card._id)}>\r\n                  {card.liked ? (\r\n                    <FavoriteIcon style={{ color: \"red\" }} />\r\n                  ) : (\r\n                    <FavoriteBorderIcon />\r\n                  )}\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FindTheOne;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}