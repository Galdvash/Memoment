{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nconst useAddCards = () => {\n  _s();\n  const [isClick, setIsClick] = useState(false);\n  const [formValid, setFormValid] = useState(false);\n  const token = localStorage.getItem('token');\n  const [formData, setFormData] = useState({\n    title: \"\",\n    subtitle: \"\",\n    description: \"\",\n    phone: \"\",\n    email: \"\",\n    web: \"\",\n    image: {\n      // כאן משתנה המבנה של image \n      url: \"\",\n      alt: \"\"\n    },\n    city: \"\",\n    country: \"\",\n    state: \"\",\n    street: \"\",\n    houseNumber: \"\",\n    zip: \"\"\n  });\n  useEffect(() => {\n    const isValid = formData.title && formData.subtitle && formData.description && formData.phone && formData.email && formData.city && formData.country && formData.street && formData.houseNumber && formData.zip;\n    setFormValid(isValid);\n  }, [formData]);\n  const addCard = async () => {\n    try {\n      const config = {\n        method: 'post',\n        url: 'https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards',\n        headers: {\n          'x-auth-token': token\n        },\n        data: {\n          title: formData.title,\n          subtitle: formData.subtitle,\n          description: formData.description,\n          phone: formData.phone,\n          email: formData.email,\n          web: formData.web,\n          image: {\n            url: formData.image.url,\n            alt: formData.image.alt\n          },\n          address: {\n            city: formData.city,\n            country: formData.country,\n            state: formData.state,\n            street: formData.street,\n            houseNumber: formData.houseNumber,\n            zip: formData.zip\n          }\n        }\n      };\n      console.log('Sending request with config:', config);\n      const response = await axios(config);\n      console.log('Card added successfully:', response.data);\n\n      // Update card list\n      addCardToList(response.data);\n\n      // Close form\n      closeForm();\n    } catch (error) {\n      console.error('Error adding card:', error);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (formValid) {\n      addCard(); // Call the addCard function here\n      console.log(\"Form submitted:\", formData);\n    }\n  };\n  const closeForm = () => {\n    setIsClick(false);\n  };\n  const OpenAndCloseCard = () => {\n    setIsClick(prevIsClick => !prevIsClick);\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevData => {\n      if (name.startsWith(\"image\")) {\n        return {\n          ...prevData,\n          image: {\n            ...prevData.image,\n            [name.split(\".\")[1]]: value\n          }\n        };\n      } else {\n        return {\n          ...prevData,\n          [name]: value\n        };\n      }\n    });\n  };\n  return {\n    isClick,\n    OpenAndCloseCard,\n    handleChange,\n    handleSubmit,\n    formValid,\n    formData,\n    setIsClick,\n    closeForm\n  };\n};\n_s(useAddCards, \"jKVE0w7oI1bdlxHJMR8JBu3fMK4=\");\nexport default useAddCards;","map":{"version":3,"names":["useState","useEffect","axios","useAddCards","_s","isClick","setIsClick","formValid","setFormValid","token","localStorage","getItem","formData","setFormData","title","subtitle","description","phone","email","web","image","url","alt","city","country","state","street","houseNumber","zip","isValid","addCard","config","method","headers","data","address","console","log","response","addCardToList","closeForm","error","handleSubmit","e","preventDefault","OpenAndCloseCard","prevIsClick","handleChange","name","value","target","prevData","startsWith","split"],"sources":["C:/Users/galdv/Desktop/ReactProject/ProjectOne/src/component/Cards/AddCard/useAddCards.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nconst useAddCards = () => {\r\n  const [isClick, setIsClick] = useState(false);\r\n  const [formValid, setFormValid] = useState(false);\r\n  const token = localStorage.getItem('token');\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    subtitle: \"\",\r\n    description: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    web: \"\",\r\n    image: { // כאן משתנה המבנה של image \r\n      url: \"\",\r\n      alt: \"\"\r\n    },\r\n    city: \"\",\r\n    country: \"\",\r\n    state: \"\",\r\n    street: \"\",\r\n    houseNumber: \"\",\r\n    zip: \"\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    const isValid = formData.title &&\r\n      formData.subtitle &&\r\n      formData.description &&\r\n      formData.phone &&\r\n      formData.email &&\r\n      formData.city &&\r\n      formData.country &&\r\n      formData.street &&\r\n      formData.houseNumber &&\r\n      formData.zip;\r\n\r\n    setFormValid(isValid);\r\n  }, [formData]);\r\n  const addCard = async () => {\r\n    try {\r\n      const config = {\r\n        method: 'post',\r\n        url: 'https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards',\r\n        headers: {\r\n          'x-auth-token': token,\r\n        },\r\n        data: {\r\n          title: formData.title,\r\n          subtitle: formData.subtitle,\r\n          description: formData.description,\r\n          phone: formData.phone,\r\n          email: formData.email,\r\n          web: formData.web,\r\n          image: {\r\n            url: formData.image.url,\r\n            alt: formData.image.alt\r\n          },\r\n          address: {\r\n            city: formData.city,\r\n            country: formData.country,\r\n            state: formData.state,\r\n            street: formData.street,\r\n            houseNumber: formData.houseNumber,\r\n            zip: formData.zip,\r\n          },\r\n        },\r\n      };\r\n  \r\n      console.log('Sending request with config:', config);\r\n  \r\n      const response = await axios(config);\r\n      console.log('Card added successfully:', response.data);\r\n  \r\n      // Update card list\r\n      addCardToList(response.data);\r\n  \r\n      // Close form\r\n      closeForm();\r\n    } catch (error) {\r\n      console.error('Error adding card:', error);\r\n    }\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (formValid) {\r\n      addCard();  // Call the addCard function here\r\n      console.log(\"Form submitted:\", formData);\r\n    }\r\n  };\r\n  \r\n  const closeForm = () => {\r\n    setIsClick(false);\r\n  }\r\n\r\n  const OpenAndCloseCard = () => {\r\n    setIsClick(prevIsClick => !prevIsClick);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => {\r\n      if (name.startsWith(\"image\")) {\r\n        return {\r\n          ...prevData,\r\n          image: {\r\n            ...prevData.image,\r\n            [name.split(\".\")[1]]: value\r\n          }\r\n        }\r\n      } else {\r\n        return {\r\n          ...prevData,\r\n          [name]: value,\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n \r\n\r\n  return { isClick, OpenAndCloseCard, handleChange, handleSubmit,formValid, formData, setIsClick, closeForm };\r\n};\r\n\r\nexport default useAddCards;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}